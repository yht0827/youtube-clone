extends layouts/main
include mixins/videoPlayer
include mixins/commentBlock

block content  
    .video-detail__container
        +videoPlayer({
            src:video.fileUrl
        })
        .video__info
            if loggedUser && video.creator.id === loggedUser.id
                a(href=`${routes.editVideo}/${video.id}`)
                    button Edit video
            .video__primary
                h5.video__title=video.title
                if video.views === 1
                    span.video__views 1 view
                else 
                    span.video__views #{video.views} views
            .video__author
                a(href=`/profile/${video.creator.id}`)
                    img.u-avatar(src=video.creator.avatarUrl)
                    span.Cname=video.creator.name
                    span.Cdate Published on #{moment(video.createdAt).format("MMM D,YYYY")}
                p.video__description=video.description
            .video__comments
                if video.comments.length == 1
                    span.video__comment-number
                        span#jsCommentNumber 1
                        |  comment
                else
                    span.video__comment-number
                        span#jsCommentNumber #{video.comments.length}
                        |  comments             
                if loggedUser
                    form.add__comment#jsAddComment
                        input(type="text", placeholder="  Add a comment...")
                ul.video__comments-list#jsCommentList
                    each comment in video.comments.reverse()
                     li(id=comment.id)
                      +commentBlock(comment)